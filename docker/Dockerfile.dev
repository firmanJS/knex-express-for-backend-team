FROM node:alpine3.18

RUN npm install -g pnpm

ENV PNPM_HOME="/pnpm"
ENV PATH="$PNPM_HOME:$PATH"

RUN rm -rf /var/cache/apk/*

LABEL maintainer="firmanjs"

WORKDIR /usr/apps/knex-express-template

ENV NODE_ENV development

COPY package.json /usr/apps/knex-express-template/

COPY . /usr/apps/knex-express-template/

COPY src/lang/locale build/lang/locale

RUN pnpm install && pnpm add -g ts-node && pnpm add -g knex

CMD ["pnpm", "dev"]